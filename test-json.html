<!DOCTYPE html>
<html>
<head>
    <title>JSON Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>JSON Test</h1>
    <div id="results"></div>

    <script>
        fetch('/word-curations/index.html')
            .then(r => r.text())
            .then(html => {
                const resultsDiv = document.getElementById('results');
                
                // Extract the JSON
                const startIdx = html.indexOf('"allWordsDataScript">') + 21;
                const endIdx = html.indexOf('</script>', startIdx);
                const jsonStr = html.substring(startIdx, endIdx - startIdx);
                
                resultsDiv.innerHTML += '<div class="debug">JSON String Length: ' + jsonStr.length + '</div>';
                resultsDiv.innerHTML += '<div class="debug">JSON starts with: ' + jsonStr.substring(0, 100) + '...</div>';
                resultsDiv.innerHTML += '<div class="debug">JSON ends with: ...' + jsonStr.substring(jsonStr.length - 100) + '</div>';
                
                try {
                    const allWords = JSON.parse(jsonStr);
                    resultsDiv.innerHTML += '<div class="success debug">✓ JSON parsed successfully!</div>';
                    resultsDiv.innerHTML += '<div class="debug">Word count: ' + allWords.length + '</div>';
                    resultsDiv.innerHTML += '<div class="debug">First word: ' + allWords[0].word + '</div>';
                    resultsDiv.innerHTML += '<div class="debug">First definition: ' + allWords[0].definition.substring(0, 100) + '...</div>';
                    
                    // Test filter
                    const filtered = allWords.filter(w => w.word.toLowerCase().includes('the'));
                    resultsDiv.innerHTML += '<div class="debug">Words containing "the": ' + filtered.length + '</div>';
                    
                } catch (e) {
                    resultsDiv.innerHTML += '<div class="error debug">✗ JSON parse error: ' + e.message + '</div>';
                }
            })
            .catch(e => {
                document.getElementById('results').innerHTML = '<div class="error">Fetch error: ' + e.message + '</div>';
            });
    </script>
</body>
</html>
