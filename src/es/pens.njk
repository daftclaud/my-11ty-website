---
layout: base.njk
locale: es
permalink: /es/pens/
---

<div class="content">
  <div class="pen-header">
    <div class="pen-intro">
      <img src="/assets/pens.jpeg" alt="Plumas" class="pen-hero-img" loading="eager" decoding="async" />
      <div class="pen-text">
        <p>
          Ya sea un clásico Parker Jotter, un Montblanc de edición especial o incluso un humilde pero confiable
          Pilot G2, siempre me siento mejor con una pluma y papel cerca.
        </p>
        <p>
          Comenzó casi al mismo tiempo que empecé a escribir mis <a href="/es/word-curations">curadurías de palabras</a>.
          Pero no fue hasta que mi compañero de cuarto en la universidad, Austin, me regaló una Pilot Metropolitan
          que oficialmente comencé a coleccionar.
        </p>
        <p>
          Con los años, mi colección ha crecido para incluir una variedad de plumas. Desde la suavidad de una pluma
          fuente hasta el clic confiable de un bolígrafo, cada pluma representa un capítulo de mi viaje como escritor
          y coleccionista. Esta página es un tributo a estos preciados instrumentos y a la alegría que aportan a mi vida diaria.
        </p>
      </div>
    </div>
  </div>

  <div class="pen-filters">
    <button class="filter-toggle" id="filterToggle" aria-label="Mostrar/ocultar filtros" aria-expanded="false">
      <span class="filter-toggle-icon">⚙️</span>
      <span class="filter-toggle-text">Filtros</span>
    </button>
    <div class="filters-container" id="filtersContainer">
      <div class="filter-group">
        <label for="brandFilter">Marca:</label>
        <select id="brandFilter">
          <option value="">Todas las marcas</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="typeFilter">Tipo:</label>
        <select id="typeFilter">
          <option value="">Todos los tipos</option>
        </select>
      </div>
      <div class="filter-results">
        <span id="resultCount">Mostrando todas las plumas</span>
      </div>
    </div>
  </div>

  <section class="pen-list">
      {% for post in collections.pen %}
      <article class="pen-item" data-brand="{{ post.data.brand }}" data-type="{{ post.data.type }}">
        <div class="pen-item-image">
          <img src="{{ post.data.image }}" alt="{{ post.data.title }} miniatura" loading="lazy" decoding="async" />
        </div>
        <div class="pen-info">
          <div class="pen-badges">
            {% if post.data.brand %}
              <span class="badge badge-brand">{{ post.data.brand }}</span>
            {% endif %}
            {% if post.data.type %}
              <span class="badge badge-type">{{ post.data.type }}</span>
            {% endif %}
          </div>
          <h2>
            <a href="{{ post.url }}">{{ post.data.title }}</a>
          </h2>
        </div>
      </article>
      {% endfor %}
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const brandFilter = document.getElementById('brandFilter');
  const typeFilter = document.getElementById('typeFilter');
  const resultCountSpan = document.getElementById('resultCount');
  const penItems = document.querySelectorAll('.pen-item');
  const filterToggle = document.getElementById('filterToggle');
  const filtersContainer = document.getElementById('filtersContainer');

  // Mobile filter toggle functionality
  filterToggle.addEventListener('click', function() {
    const isExpanded = filtersContainer.classList.toggle('expanded');
    filterToggle.setAttribute('aria-expanded', isExpanded);
  });

  // Close filters when user interacts with select on mobile
  const selectElements = filtersContainer.querySelectorAll('select');
  selectElements.forEach(select => {
    select.addEventListener('change', function() {
      // Keep filters open on desktop, close on mobile
      if (window.innerWidth < 600) {
        filtersContainer.classList.remove('expanded');
        filterToggle.setAttribute('aria-expanded', false);
      }
    });
  });

  // Collect unique brands and types from pen items
  const brandsSet = new Set();
  const typesSet = new Set();
  penItems.forEach(item => {
    if (item.dataset.brand) brandsSet.add(item.dataset.brand);
    if (item.dataset.type) typesSet.add(item.dataset.type);
  });

  // Populate brand dropdown
  const sortedBrands = Array.from(brandsSet).sort();
  sortedBrands.forEach(brand => {
    const option = document.createElement('option');
    option.value = brand;
    option.textContent = brand;
    brandFilter.appendChild(option);
  });

  // Populate type dropdown
  const sortedTypes = Array.from(typesSet).sort();
  sortedTypes.forEach(type => {
    const option = document.createElement('option');
    option.value = type;
    option.textContent = type;
    typeFilter.appendChild(option);
  });

  function filterPens() {
    const brand = brandFilter.value;
    const type = typeFilter.value;
    let visibleCount = 0;
    
    penItems.forEach(item => {
      const matchesBrand = !brand || item.dataset.brand === brand;
      const matchesType = !type || item.dataset.type === type;
      const shouldShow = matchesBrand && matchesType;
      item.style.display = shouldShow ? '' : 'none';
      if (shouldShow) visibleCount++;
    });

    // Update result count
    const total = penItems.length;
    if (visibleCount === total) {
      resultCountSpan.textContent = `Mostrando todas las ${total} plumas`;
    } else {
      resultCountSpan.textContent = `Mostrando ${visibleCount} de ${total} plumas`;
    }
  }

  brandFilter.addEventListener('change', filterPens);
  typeFilter.addEventListener('change', filterPens);
  
  // Initial count
  filterPens();
});
</script>

<style>
  /* Header Section */
  .pen-header {
    margin-bottom: 3em;
  }

  .pen-intro {
    display: flex;
    flex-direction: column;
    gap: 2em;
  }

  .pen-hero-img {
    width: 100%;
    max-width: 100%;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  @media (min-width: 768px) {
    .pen-intro {
      flex-direction: row;
      align-items: flex-start;
      gap: 3em;
    }

    .pen-hero-img {
      flex: 0 0 40%;
      max-width: 40%;
    }

    .pen-text {
      flex: 1;
    }
  }

  .pen-text p {
    margin-bottom: 1.5em;
    line-height: 1.6;
  }

  .pen-text p:last-child {
    margin-bottom: 0;
  }

  /* Filters */
  .pen-filters {
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 1em;
  }

  .filter-toggle {
    position: fixed;
    top: 20px;
    right: 80px; /* sits left of dark mode toggle */
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid var(--clr-border);
    background: var(--clr-main-bg);
    cursor: pointer;
    font-family: var(--ff-body);
    font-size: 1em;
    font-weight: 600;
    color: var(--clr-link);
    transition: all 0.3s ease;
    align-items: center;
    gap: 0.5em;
    justify-content: center;
    display: flex;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .filter-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .filter-toggle:focus {
    outline: 2px solid var(--clr-border);
    outline-offset: 2px;
  }

  .filter-toggle-icon {
    font-size: 1.2em;
  }

  .filter-toggle-text {
    display: none; /* hide text to match compact toggle near theme button */
  }

  .filters-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5em;
    align-items: center;
    padding: 1em;
  }

  .filter-group {
    display: flex;
    align-items: center;
    gap: 0.75em;
  }

  .filter-group label {
    font-weight: 600;
    color: #333;
    margin: 0;
  }

  .filter-group select {
    padding: 0.5em 0.75em;
    border: 1px solid #ddd;
    border-radius: 4px;
    background: white;
    cursor: pointer;
    font-size: 0.95em;
  }

  .filter-group select:hover {
    border-color: #999;
  }

  .filter-group select:focus {
    outline: none;
    border-color: #d400ff;
    box-shadow: 0 0 0 2px rgba(212, 0, 255, 0.1);
  }

  .filter-results {
    margin-left: auto;
    color: #666;
    font-size: 0.95em;
    font-weight: 500;
  }

  /* Mobile: place next to bottom-right theme toggle */
  @media (max-width: 600px) {
    .pen-filters {
      padding: 0;
      background: white;
      border: 2px solid #ddd;
      border-radius: 8px;
    }

    .filter-toggle {
      top: auto;
      bottom: 20px;
      right: 70px; /* theme toggle is at right: 15px; sit just to its left */
    }

    .filters-container {
      flex-direction: column;
      align-items: stretch;
      gap: 1em;
      padding: 0;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .filters-container.expanded {
      max-height: 500px;
      opacity: 1;
      padding: 1em;
      border-top: 2px solid #ddd;
    }

    .filter-group {
      flex-direction: column;
      align-items: stretch;
    }

    .filter-group label {
      margin-bottom: 0.5em;
    }

    .filter-group select {
      width: 100%;
    }

    .filter-results {
      margin-left: 0;
      padding-top: 1em;
      border-top: 1px solid #eee;
      text-align: center;
    }
  }

  @media (min-width: 601px) {
    .filters-container {
      flex-direction: row;
      align-items: center;
      gap: 1.5em;
    }

    .filter-results {
      margin-left: auto;
    }
  }

  /* Pen Grid Layout */
  .pen-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2em;
    margin-bottom: 2em;
  }

  @media (min-width: 600px) {
    .pen-list {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .pen-list {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* Pen Item Cards */
  .pen-item {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
  }

  .pen-item:hover {
    box-shadow: 0 8px 16px rgba(212, 0, 255, 0.15);
    transform: translateY(-4px);
  }

  .pen-item-image {
    width: 100%;
    height: 200px;
    background: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pen-item-image img {
    max-height: 100%;
    object-fit: contain;
  }

  .pen-info {
    padding: 1em;
    display: flex;
    flex-direction: column;
    gap: 0.5em;
    flex: 1;
  }

  .pen-badges {
    display: flex;
    gap: 0.5em;
    flex-wrap: wrap;
  }

  .badge {
    display: inline-block;
    padding: 0.35em 0.75em;
    border-radius: 999px;
    font-size: 0.85em;
    font-weight: 600;
  }

  .badge-brand {
    background: rgba(212, 0, 255, 0.1);
    color: #8b008b;
  }

  .badge-type {
    background: rgba(0, 123, 255, 0.1);
    color: #0056b3;
  }

  h2 {
    margin: 0;
    font-size: 1.2em;
  }

  h2 a {
    color: inherit;
    text-decoration: none;
  }

  h2 a:hover {
    color: #d400ff;
  }

  /* Dark mode tweaks */
  [data-theme="dark"] .pen-filters {
    background: var(--clr-main-bg);
    border: 2px solid var(--clr-border);
  }

  [data-theme="dark"] .filter-toggle {
    background: var(--clr-main-bg);
    border-color: var(--clr-border);
    color: var(--clr-link);
  }

  [data-theme="dark"] .filters-container {
    background: var(--clr-main-bg);
  }

  [data-theme="dark"] .filter-group label,
  [data-theme="dark"] .filter-results {
    color: var(--clr-text);
  }

  [data-theme="dark"] .filter-group select {
    background: var(--clr-main-bg);
    color: var(--clr-text);
    border-color: var(--clr-border);
  }

  [data-theme="dark"] .pen-item {
    background: var(--clr-main-bg);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
  }

  [data-theme="dark"] .pen-item:hover {
    box-shadow: 0 8px 16px rgba(212, 0, 255, 0.25);
  }

  [data-theme="dark"] .badge-brand {
    background: rgba(212, 0, 255, 0.2);
    color: #f0c0ff;
  }

  [data-theme="dark"] .badge-type {
    background: rgba(0, 123, 255, 0.2);
    color: #c6e2ff;
  }
</style>
